<!DOCTYPE html>
<html>
<head>
    <title>Player finder</title>
    <style>
        body { font-family: Arial; background: #1f1f1f; color: white; padding: 20px; }
        input, button { padding: 10px; margin: 10px 0; width: 100%; }
        #result { margin-top: 20px; }
    </style>
</head>
<body>
    <h2>Find What Server a Player is In</h2>

    <input id="username" placeholder="Enter Username">
    <input id="placeId" placeholder="Enter PlaceId">

    <button onclick="scan()">Find Server</button>

    <div id="result"></div>

<script>
async function scan() {
    const user = document.getElementById("username").value;
    const placeId = document.getElementById("placeId").value;

    document.getElementById("result").innerHTML = "Scanning...";

    const res = await fetch(`/api/scanUser?username=${user}&placeId=${placeId}`);
    const data = await res.json();

    if (!data.found) {
        document.getElementById("result").innerHTML = "User not found in any **public** servers.";
        return;
    }

    document.getElementById("result").innerHTML = `
        <h3>User Found!</h3>
        <p>Server ID: ${data.serverId}</p>
        <a href="https://www.roblox.com/games/start?placeId=${placeId}&serverId=${data.serverId}" target="_blank">
            Click to Join Server
        </a>
    `;
}
</script>

</body>
</html>
